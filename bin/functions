#!/bin/bash

trap "exit" SIGTERM SIGINT

function abend() {
  local message=$1
  echo "error: $message"
  exit 1
}

function install_service() {
  local package="$1"
  /bin/rpm -q "$package" > /dev/null
  if [ $? -ne 0 ]
  then
      /usr/bin/yum install -y nsd || abend "Cannot install NSD."
      /bin/systemctl stop nsd.service
  fi
}

for package in $@
do
  installer="$PUPPIFY_PATH/service/postfix/installer"
  [ -x "$installer" ] || abend "no such service"
  "$installer"
done
